{% extends "layout.html" %} 

{% block pageTitle %}
Create Event
{% endblock %}

{% block content %}

<!-- Modal -->
<div class="modal fade" id="templateSaveDialog" tabindex="-1" role="dialog" aria-labelledby="templateSaveDialogTitle" aria-hidden="true">

  <script type="text/javascript">
    function save_action(){
      document.getElementById('close_action').value = 'save'
    }
  </script>

  <script type="text/javascript">
    function cancel_action(){
      document.getElementById('ts_name_input').value = '';
      document.getElementById('close_action').value = 'cancel'
    }
  </script>
  
  <input type="hidden" id="close_action" name="close_action" value="">
   
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="templateSaveDialogTitle">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Save template (Specify Path and/or Name):
      <input type="text" id="ts_name_input" name="ts_name_input" class="text required"/>        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="cancel_action();" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-secondary" onclick="save_action();" data-dismiss="modal">Save Template</button>
      </div>
    </div>
  </div>
</div>

<script>
$("#templateSaveDialog").on("hidden.bs.modal", function () {
   var name = $('#ts_name_input').val();
   var close_action = $('#close_action').val();
   
   if (close_action == "cancel") {
     return
   }
   
   if (close_action == 'save') {
     document.getElementById("close_action").value = close_action
     document.getElementById("ts_name").value = name
     document.getElementById("ts_indicator").value = "save_template"
     var doc = document.getElementById("classForm")
     HTMLFormElement.prototype.submit.call(document.getElementById("classForm"))
  }

});
</script>


<div class="container content-section">

  <form method="POST" action="" id="classForm">
    <input type="hidden" name="ts_indicator" id="ts_indicator" value="">
    <input type="hidden" id="ts_name" name="ts_name" value="">
      
    {{ form.hidden_tag() }}
    <table bgcolor="#00FF00">
      <fieldset class="form-group">
     
        <select name="Template" onchange="this.options[this.selectedIndex].value && (window.location = this.options[this.selectedIndex].value);">
          {% for template in form.templates %}
            <option value="{{ template }}">{{ template }}</option>
          {% endfor %}
        </select>
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#templateSaveDialog">
          Save Template File
        </button>
      
        <div class="modal-body" class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="form-group pull-left">
                {{ form.classTitle.label(class="form-control-label") }} {% if form.classTitle.errors %} {{ form.classTitle(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.classTitle.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.classTitle(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group pull-left">
                {{ form.instructorName.label(class="form-control-label") }} {% if form.instructorName.errors %} {{ form.instructorName(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.instructorName.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.instructorName(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-group pull-left">
                {{ form.instructorEmail.label(class="form-control-label") }} {% if form.instructorEmail.errors %} {{ form.instructorEmail(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.instructorEmail.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.instructorEmail(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                {{ form.classLocation.label(class="form-control-label") }} {% if form.classLocation.errors %} {{ form.classLocation(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.classLocation.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.classLocation(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                {{ form.classDescription.label(class="form-control-label") }} {% if form.classDescription.errors %} {{ form.classDescription(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.classDescription.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.classDescription(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                {{ form.classDate.label(class="form-control-label") }} {% if form.classDate.errors %} {{ form.classDate(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.classDate.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.classDate(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-group">
                {{ form.starttime.label(class="form-control-label") }} {% if form.starttime.errors %} {{ form.starttime(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.starttime.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.starttime(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-group">
                {{ form.endtime.label(class="form-control-label") }} {% if form.endtime.errors %} {{ form.endtime(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.endtime.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.endtime(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">

              <div class="form-group">
                {{ form.minAge.label(class="form-control-label") }} {% if form.minAge.errors %} {{ form.minAge(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.minAge.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.minAge(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                {{ form.maxAge.label(class="form-control-label") }} {% if form.maxAge.errors %} {{ form.maxAge(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.maxAge.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.maxAge(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                {{ form.registrationLimit.label(class="form-control-label") }} {% if form.registrationLimit.errors %} {{ form.registrationLimit(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.registrationLimit.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.registrationLimit(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                {{ form.memberPrice.label(class="form-control-label") }} {% if form.memberPrice.errors %} {{ form.memberPrice(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.memberPrice.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.memberPrice(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                {{ form.nonMemberPrice.label(class="form-control-label") }} {% if form.nonMemberPrice.errors %} {{ form.nonMemberPrice(class="form-control form-control-sm is-invalid") }}
                <div class="invalid-feedback">
                  {% for error in form.nonMemberPrice.errors %} <span>{{ error }}</span> {% endfor %}
                </div>
                {% else %} {{ form.nonMemberPrice(class="form-control form-control-sm") }} {% endif %}
              </div>
            </div>
          </div>
    </table>

    <h2 class="">Required authorizations</h1>
      {% for i in authorizations %}
        {% if i in form.templateRequiredAuths %}
          <input type="checkbox" id="id_{{i}}" name="authorizations" value="{{i}}" checked>
        {% else %}
          <input type="checkbox" id="id_{{i}}" name="authorizations" value="{{i}}">
        {% endif %}
        <label for="id_{{i}}">{{i}}</label>
      {% endfor %}
      
    <div class="form-group">{{ form.submit(class="btn btn-outline-info") }}</div>
</div>
</form>
</div>
{% endblock content %}
